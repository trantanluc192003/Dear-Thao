<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dear Thảo</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: #fffaf0;
      font-family: 'Courier New', monospace;
      text-align: center;
      overflow: hidden;
    }
    #intro {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: #fffaf0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    #intro img {
      width: 200px;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    #startBtn {
      padding: 10px 20px;
      font-size: 1.2rem;
      background-color: #ff6fa0;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    #treeCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
    }
    #message {
      position: absolute;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      max-width: 600px;
      font-size: 1.2rem;
      color: #d63384;
      white-space: pre-wrap;
      z-index: 5;
    }
  </style>
</head>
<body>

<div id="intro">
  <img src="tim.png" alt="heart">
  <button id="startBtn">Click here</button>
</div>

<canvas id="treeCanvas"></canvas>
<div id="message"></div>

<script>
  const intro = document.getElementById('intro');
  const messageEl = document.getElementById('message');
  const canvas = document.getElementById('treeCanvas');
  const ctx = canvas.getContext('2d');
  let width, height;

  function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  const hearts = [];
  class Heart {
    constructor() {
      this.reset();
    }
    reset() {
      this.x = Math.random() * width;
      this.y = Math.random() * -height;
      this.size = 10 + Math.random() * 10;
      this.speed = 1 + Math.random() * 2;
      this.alpha = 0.6 + Math.random() * 0.4;
      this.color = `hsl(${Math.random()*360}, 100%, 70%)`;
      this.angle = Math.random() * 2 * Math.PI;
    }
    update() {
      this.y += this.speed;
      if (this.y > height) this.reset();
    }
    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle);
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = this.color;
      ctx.beginPath();
      const s = this.size;
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(0, -s/2, -s, -s/2, -s, 0);
      ctx.bezierCurveTo(-s, s/2, 0, s, 0, s*1.5);
      ctx.bezierCurveTo(0, s, s, s/2, s, 0);
      ctx.bezierCurveTo(s, -s/2, 0, -s/2, 0, 0);
      ctx.fill();
      ctx.restore();
    }
  }

  for (let i = 0; i < 100; i++) hearts.push(new Heart());

  function drawTree() {
    ctx.save();
    ctx.translate(width / 2, height);
    ctx.fillStyle = "#3e2723";
    ctx.beginPath();
    ctx.moveTo(-10, 0);
    ctx.lineTo(-5, -150);
    ctx.lineTo(5, -150);
    ctx.lineTo(10, 0);
    ctx.closePath();
    ctx.fill();

    // Draw heart leaves
    for (let i = 0; i < 150; i++) {
      const x = (Math.random() - 0.5) * 300;
      const y = -150 + (Math.random() - 1) * 150;
      const size = 10 + Math.random() * 10;
      const angle = Math.random() * 2 * Math.PI;
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(angle);
      ctx.fillStyle = `hsl(${Math.random()*360}, 100%, 75%)`;
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(0, -size/2, -size, -size/2, -size, 0);
      ctx.bezierCurveTo(-size, size/2, 0, size, 0, size * 1.5);
      ctx.bezierCurveTo(0, size, size, size/2, size, 0);
      ctx.bezierCurveTo(size, -size/2, 0, -size/2, 0, 0);
      ctx.fill();
      ctx.restore();
    }
    ctx.restore();
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    drawTree();
    for (let h of hearts) {
      h.update();
      h.draw(ctx);
    }
    requestAnimationFrame(animate);
  }

  function typeWriter(text, i = 0) {
    if (i < text.length) {
      messageEl.innerHTML += text.charAt(i);
      setTimeout(() => typeWriter(text, i + 1), 40);
    }
  }

  document.getElementById('startBtn').addEventListener('click', () => {
    intro.style.display = 'none';
    animate();
    const msg = `Thảo à,

Tớ có một điều muốn nói với cậu từ rất lâu rồi...
Tớ thích cậu — không phải một chút, mà là rất rất nhiều.

Mỗi lần thấy cậu cười, tớ lại thấy tim mình đập nhanh hơn.
Tớ không biết tương lai thế nào, nhưng tớ muốn cùng cậu tạo nên nó.

Thảo, cậu có muốn làm người yêu tớ không? 💗`;
    setTimeout(() => typeWriter(msg), 2000);
  });
</script>

</body>
</html>
