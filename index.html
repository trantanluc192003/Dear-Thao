<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dear Thảo</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #fffaf0;
      font-family: 'Courier New', Courier, monospace;
      overflow: hidden;
    }
    #startScreen {
      position: fixed;
      width: 100vw;
      height: 100vh;
      background-color: #fffaf0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 10;
    }
    #startScreen img {
      width: 200px;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    #startBtn {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      background: pink;
      cursor: pointer;
    }

    #content {
      display: none;
      height: 100vh;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      padding: 40px;
      box-sizing: border-box;
      position: relative;
    }

    #message {
      width: 50%;
      color: deeppink;
      white-space: pre-line;
      font-size: 20px;
      z-index: 1;
    }

    #treeContainer {
      width: 50%;
      position: relative;
      display: flex;
      align-items: end;
      justify-content: end;
      z-index: 0;
    }

    #heartTree {
      height: 80vh;
    }

    .fallingHeart {
      position: absolute;
      pointer-events: none;
      user-select: none;
    }
  </style>
</head>
<body>

<div id="startScreen">
  <img src="tim.png" alt="Heart">
  <button id="startBtn">Click here</button>
</div>

<div id="content">
  <div id="message"></div>
  <div id="treeContainer">
    <img src="caytim.png" id="heartTree" alt="Heart Tree">
  </div>
</div>

<script>
  const message = `Thảo ơi,

Tớ có một điều muốn nói với cậu từ lâu rồi…
Tớ thích cậu, không chỉ một chút, mà là rất nhiều.

Mỗi khi cậu cười, cả thế giới như sáng bừng lên trong mắt tớ.

Tớ không biết tương lai ra sao, nhưng tớ muốn được cùng cậu viết nên nó.

Cậu đồng ý làm người yêu tớ nhé? 💗`;

  const startScreen = document.getElementById('startScreen');
  const content = document.getElementById('content');
  const startBtn = document.getElementById('startBtn');
  const messageBox = document.getElementById('message');
  const heartTree = document.getElementById('heartTree');

  startBtn.onclick = () => {
    startScreen.style.display = 'none';
    content.style.display = 'flex';
    typeWriter(message, 0);
    setInterval(() => {
        const count = Math.floor(Math.random() * 3) + 1; // từ 1 đến 3
        for (let i = 0; i < count; i++) {
            createFallingHeart();
        }
    }, 1500 + Math.random() * 1500);
  };

  function typeWriter(text, i) {
    if (i < text.length) {
      messageBox.innerHTML += text.charAt(i);
      setTimeout(() => typeWriter(text, i + 1), 40);
    }
  }

  const colors = ['#ff69b4', '#ff1493', '#ffa07a', '#ff4500', '#8a2be2', '#1e90ff', '#ffff66'];

  function createFallingHeart() {
    const rect = heartTree.getBoundingClientRect();
    const heart = document.createElement('div');
    heart.className = 'fallingHeart';
    heart.textContent = '♥';

    // Vị trí bắt đầu gần gốc cây
    const startX = rect.left + rect.width / 2 + (Math.random() - 0.5) * 100;
    const startY = rect.top + rect.height / 3 + Math.random() * 50;

    // Lệch bay sang trái (gió)
    const driftX = -200 + Math.random() * -100;
    const fallY = 600 + Math.random() * 100;

    heart.style.left = `${startX}px`;
    heart.style.top = `${startY}px`;
    heart.style.color = colors[Math.floor(Math.random() * colors.length)];
    heart.style.fontSize = `${50 + Math.random() * 25}px`;

    // Hiệu ứng bay chéo
    heart.animate([
      { transform: 'translate(0, 0)', opacity: 1 },
      { transform: `translate(${driftX}px, ${fallY}px)`, opacity: 0 }
    ], {
      duration: 4000,
      easing: 'linear',
      fill: 'forwards'
    });

    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 4000);
  }
</script>

</body>
</html>
